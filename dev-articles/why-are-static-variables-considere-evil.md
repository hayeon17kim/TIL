# 왜 자바에서 static 사용을 지양해야 하는가?

자바로 개발을 하다 보면 자주 쓰는 메서드들을 static으로 선언하고자 하는 유혹이 생긴다. **객체화를 할 필요도 없고** **접근도 훨씬 용이**하기 때문이다. 하지만 staic의 남용은 **프로그램의 상태를 추정하기 어렵게 만들고 결과적으로 객체지향적이지 않은 코드**를 작성하게 만든다. 

## 사용을 지양해야 하는 이유

### 추적이 어렵다  

static 변수는 global state의 성격을 갖는다. 따라서 코드의 여러 부분에서 영향을 받을 수 있어 변화를 추적하기 어렵다. 반면 이 변수를 인스턴스로 생성하면 테스트 중 변수가 어떤 상태를 가지고 있는 지 추적하는 것이 간단해진다. 큰 개념을 그리기 위해서는 일단 이해하고자 하는 범위를 좁혀 쉽게 추론할 수 있어야 하는데, static 변수는 그런 면에서 범위를 좁히기 힘들다.

### 객체지향적이지 않다

static 변수는 각 객체의 데이터들이 캡슐화되어야 한다는 객체지향 프로그래밍의 원칙에 위반된다. static은 스코프를 고려할 필요가 없는 경우, 즉 전역변수를 사용할 때 유용하지만 절차지향적인 방법이다.


### 메모리를 회수할 수 없다

static 변수는 heap이 아니라 static 영역에서 프로그램이 실행되고 있는 내내 살아있다. 이들로부터 메모리를 회수할 수 없다. 반면 변수를 인스턴스화 해서 함수 내에서 인스턴스로 생성하게 되면 호출이 끝난 후 가비지 컬렉터에 의해 소멸된다. 


### 재사용성이 떨어진다

static 메서드는 인터페이스를 구현하는 데 사용될 수 없다. 또한 오버라이딩을 할 수 없는 static 멤버들 때문에 클래스를 확장하는 것이 어려워질 것이다. 즉 static 메서드는 프로그래머가 자바의 유용한 객체지향적 기능을 사용하는 것을 방해한다.

### 코드의 상호의존성을 줄여주지도 않는다.

흔히 static 멤버가 코드의 상호 의존성(inter-dependency)를 줄여준다고 하지만, 이것은 잘못된 생각이다. 인스턴스화 되어 있는 객체들을 쓰지 않고 **static 변수에 직접 접근하는 방식**으로 코드를 짜다 보면, 결국 작성한 **모듈들이 서로 더 많이 엮이는 상황**에 처하게 될 것이다.



 ## static의 대안

- transient, volatile 제어자
- final 메서드 
  - 메서드 인라이닝(실제 메서드를 호출하지 않고 바로 결과값을 돌려주는 방식)을 위해 
  - 컴파일러 단에서 최적화 작업이 가능하다.
  - 인스턴스를 사용할 때마다 새로 생성하지 않고 여러번 재사용
  - 멀티스레드를 이용하여 멀티코어 프로세스의 장점을 극대화하기 위해서는 이런 디장린이 필수적일 수 있다.
- native 메서드
  - 빠른 속도
- **싱글톤 디자인 패턴**
  - 스레드 안정성
  - lazy-initialization(객체가 필요할 때마다 만들어 쓰는 기법)을 허용
  - sub-classing 기법 허용
  - 테스트와 리팩토링 용이
    - 반면 static 멤버는 여러 클래스를 수정하게 만든다.