# 2장: 네트워크의 기본 규칙

## 네트워크의 규칙

- 통신하기 위한 규칙을 프로토콜이라고 한다.
- 서로 이해하지 못하는 언어를 사용한다면, 이해 가능한 규칙을 정하여 대화할 수 있다. 



## OSI 모델과 TCP/IP 모델 

### OSI 모델

- **OSI 모델**은 ISO(국제 표준화 기구)가 1977년에 정의한 국제 통신 표준 규약이다. 네트워크의 기본 구조를 7개 계층으로 나눠서 표준화한 통신 규약으로 현재 다른 모든 통신 규약의 기반이 된다.

- OSI 모델은 7계층으로 위에서부터 응용 계층, 표현 계층, 세션 계층, 전송 계층, 네트워크 계층, 데이터 링크 계층, 물리 계층이 있다.

  - 송신 측은 데이터를 보내기 위해서 상위 계층에서 하위 계층으로 데이터를 전달한다.
  - 각 계층은 독립적이므로 데이터가 전달되는 동안 다른 계층의 영향을 받지 않는다.
  - 수신 측은 데이터를 받기 위해서 하위 계층에서 상위 계층으로 각 계층을 통해 전달된 데이터를 받는다.

  [이미지 출처](http://wiki.hash.kr/index.php/%ED%8C%8C%EC%9D%BC:OSI_7_%EA%B3%84%EC%B8%B5.jpg)

  ![image](https://user-images.githubusercontent.com/50407047/96348772-2b4e3400-10e6-11eb-8e64-4251e5ff518a.png)

  | 계층  | 이름                                                   | 설명                                                         |
  | ----- | ------------------------------------------------------ | ------------------------------------------------------------ |
  | 7계층 | 응용 계층<br />(Application Layer, 애플리케이션 계층)  | 이메일 & 파일 전송, 웹 사이트 조회 등 애플리케이션에 대한 서비스를 제공한다. |
  | 6계층 | 표현 계층<br />(Presentation Layer, 프레젠테이션 계층) | 문자 코드, 압축, 암호화 등의 데이터를 변환한다.              |
  | 5계층 | 세션 계층<br />(Session Layer)                         | 세션 체결, 통신 방식을 결정한다.                             |
  | 4계층 | 전송 계층<br />(Transport Layer, 트랜스포트 계층)      | 신뢰할 수 있는 통신을 구현한다.                              |
  | 3계층 | 네트워크 계층<br />(Network Layer)                     | 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정한다. |
  | 2계층 | 데이터 링크 계층<br />(Data Link Layer)                | 네트워크 기기 간의 데이터 전송 및 물리 주소를 결정한다.      |
  | 1계층 | 물리 계층<br />(Physical Layer)                        | 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어한다.    |

### TCP/IP 모델

- 현재는 TCP/IP 모델을 사용하고 있다. OSI 모델 7계층의 네트워크에서 데이터를 전송하는 과정을 4개의 계층(Layer)로 단순화시켜서 사용하는 모델이다. 인터넷 모델이라고도 한다. 위에서부터 응용 계층, 전송 계층, 인터넷 계층,  네트워크 접속 계층이 있다.

  - 표현 계층과 세션 계층을 응용 계층에 포함하고 있다.
  - 각 계층에는 다양한 프로토콜이 있다. 

  [이미지 출처](http://itqomcom.blogspot.com/2018/09/osi-7.html)

  ![image](https://user-images.githubusercontent.com/50407047/96348892-f7274300-10e6-11eb-86a0-44ad6497d79b.png)



## 캡슐화와 역캡슐화

- 데이터를 보낼 때는 필요한 정보를 데이터에 추가해야 하는데 이 정보를 헤더라고 한다. 헤더는 저장되거나 전송되는 데이터의 맨 앞에 위치하는 추가적인 정보 데이터로, 데이터의 내용이나 성격을 식별 또는 제어하는 데 사용한다.
- 데이터를 상대방에게 보낼 때 각 계층에서 헤더(데이터 링크 계층의 트레일러도 포함)을 붙여 나가는 것을 **캡슐화**라고 한다. 캡슐화는 컴퓨터 통신에서 상위 계층의 통신 프로토콜 정보를 데이터에 추가하여 하위 계층으로 전송하는 기술이다.
- 데이터를 수신할 때 각 계층에서 헤더(데이터 링크 계층의 트레일러도 포함)을 제거해나가는 것을 **역캡슐화**라고 한다. 역캡슐화는 상위 계층의 통신 프로토콜에서 하위 계층에서 추가한 정보와 데이터를 분리하는 기술이다.
- OSI 모델에서 데이터 송신 측은 응용계층 -> 전송 계층 -> 네트워크 계층 -> 데이터 링크 계층 순서로 캡슐화한다. 반대로 수신 측은 데이터 링크 계층 -> 네트워크 계층 -> 전송 계층 -> 응용 계층 순서로 역캡슐화 한다.
- 송신 측의 데이터 링크 계층에서 만들어진 데이터가 전기 신호로 변환되어 수신 측에 전송된다.

> 헤더(header): 저장되



## VPN

[VPN](https://judo0179.tistory.com/44)은 Virtual Private Network(가상 사설망)의 약어이다. **가상 통신 터널**을 만들어 **기업 본사나 지사와 같은 거점 간을 연결**하거나 **외부에서 인터넷으로 사내에 접속**하는 것을 말한다. 

덩치 큰 집단의 여러 곳에 퍼져있는 컴퓨터들을 잇는 사설 네트워크를 만들 때, 일일이 전선으로 연결하기는 돈이 많이 들고 물리적으로 보안이 취약하므로 그 대신 인터넷 네트워크와 암호화 기술을 이용하여 통신 시스템을 구축하는 것을 말한다. 공공기관이나 사기업 등 단체에서 내부인들만 사용할 수 있는 특수 목적의 인트라넷을 구축할 때는 보통 해당되는 컴퓨터만 전용선으로 연결해서 제 3자가 함부로 접근하지 못하게 구축되는 서버를 쓴다. 그러나 반대로 회선이 없는 지역에서는 망 자체에 접근이 불가능해지며 전국, 해외 단위로 회사가 확장할 때 수반되는 전용선 구축 비용이 천문학적으로 커지게 된다. 따라서 확장성이 뛰어난 인터넷을 인트라넷처럼 사용할 수 있도록 하는 기술이 바로 가상 사설망이다. 따라서 가상 사설망은 인트라넷의 확장 또는 검열, 지역 제한이 있는 네트워크가 그것이 자유로운 인터넷을 중계해주는 기능을 주로 수행하고 있다.

### 인터넷 VPN

인터넷 VPN에는 **거점 간 접속**과 **원격 접속 연결**이 있다. 둘 다 일반 인터넷망을 사용한다.

거점 간 접속은 IPsec이라는 **암호 기술 프로토**콜을 사용해서 접근한다. 반면 원격 접속 연결은 외부에서 사용하는 컴퓨터와 사내 네트워크를 연결하기 때문에 **암호화된 통신로**를 만든다.

### IP-VPN

[MPLS](https://judo0179.tistory.com/40)라는 기술을 사용하여 **인터넷망이 아닌** **통신 사업자 전용 폐쇄망**을 사용한다. MPLS는 **폐쇄망**을 사용하기 때문에 제삼자에 의한 해킹이나 데이터 변조의 **위험이 없어** **암호화 기능이 필요하지 않다.**



## 용어 정리

- **인터넷(Internet)**: 인터넷 프로토콜 스위트(TCP/IP)을 기반으로 하여 **전 세계적으로 연결된 컴퓨터 네트워크**를 말한다.
- **인트라넷(Intranet**): **특정 집단을 위해 폐쇄적으로 구축되어 있는 네트워크 망**을 말한다. 인터넷 기술과 통신 규약을 이용하여 조직 내부의 업무를 통합하는 정보 시스템으로, 대기업, 정부, 지자체, 학교, 공공기관, 군대 등에서 사용한다. (북한에서 쓰는 인터넷이란 거의 이것이다.) 그 조직에서만 사용 가능한 사내망으로 조직 내부에서만 접속이 가능하다. 먼저 생긴 것은 인트라넷이지만 나중에 확장판이 인터넷이라는 이름을 얻고 이 확장판과 구분을 위해 인트라넷이라는 이름을 얻게 되었다. 